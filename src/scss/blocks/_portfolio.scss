// ========================================
// Portfolio : compositions
// ========================================

@use "../tools/mq" as mq;

.portfolio {
	--flow-space: var(--space-m-l);
	margin-top: var(--space-l-xl);

	// Variante .breakout (projet) //
	// &.breakout {
	// 	--item-space: var(--space-2xl);
	// 	margin-top: var(--space-2xl-3xl);
	// }

	// Variante slideshow (carousel)
	// &[data-variant="slideshow"] {
	// 	& .splide {
	// 		max-width: 100%;
	// 		height: calc(100vh - var(--gutter) * 2);

	// 		&.is-initialized {
	// 			& .splide__slide img {
	// 				opacity: 0;
	// 			}

	// 			& .splide__slide.is-active img {
	// 				opacity: 1;
	// 			}
	// 		}
	// 	}

	// 	& .splide__track {
	// 		height: calc(100% - var(--space-2xl));
	// 	}

	// 	// Navigation
	// 	& .splide__arrows {
	// 		position: absolute;
	// 		bottom: calc(var(--space-2xs) * -1);
	// 		right: 0;
	// 	}

	// 	& .splide__arrow {
	// 		background: none;
	// 		position: initial;
	// 		transform: none;
	// 		display: inline-flex;
	// 		opacity: 1;
	// 		width: auto;
	// 		height: auto;

	// 		& svg {
	// 			width: var(--space-l-xl);
	// 			height: auto;
	// 		}

	// 		&:disabled svg {
	// 			opacity: 0.3;
	// 		}
	// 	}

	// 	& .splide__arrow--prev {
	// 		margin-right: var(--space-s);
	// 	}

	& img {
		height: 100%;
		object-fit: cover;
	}
}

@include mq.mq($from: 500px) {
	.portfolio_album[data-composition="projet"] {
		grid-template-columns: repeat(2, 1fr);

		& figure:first-child,
		& figure:nth-child(5n + 1) {
			grid-column: span 2;
		}
	}
}

@include mq.mq($from: 760px) {
	.portfolio_album[data-composition="projet"] {
		grid-template-columns: repeat(4, 1fr);

		& figure {
			aspect-ratio: 1/1;
		}

		& figure:first-child {
			grid-column: span 2;
			grid-row: span 2;
		}
	}

	.portfolio_album-pair[data-composition="projet"] {
		& figure:first-child {
			grid-column: auto;
			grid-row: auto;
		}

		& figure:last-child {
			grid-column: 3 / -1;
			grid-row: 1 / 3;
		}
	}
}

.portfolio_figure {
	& img {
		width: 100%;
	}
}

.portfolio_caption {

	.portfolio_album &,
	.article_logo & {
		position: absolute;
		left: 0;
		bottom: 0;
		padding: 0.5em 0.75em 0 0.2em;
		background-color: var(--color-paper);
		font-size: var(--step--2);
	}
}

.portfolio_caption-heading {
	font-size: inherit;
	font-weight: 500;
	color: var(--color-primary);
}

.portfolio_caption-desc {
	font-size: var(--step--3);
	font-weight: 300;
}
