let e=!1;if("undefined"!=typeof window){const t={get passive(){e=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}const t="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1);let n,s,o,i=[],r=new Map,l=!1,a=-1;const d=e=>i.some((t=>!(!t.options.allowTouchMove||!t.options.allowTouchMove(e)))),u=e=>{const t=e||window.event;return!!d(t.target)||t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)};class c extends HTMLElement{constructor(){super();const e=this;this.state=new Proxy({status:"open",enabled:!1},{set(t,n,s){const o=t[n];return t[n]=s,o!==s&&e.processStateChange(),t}})}get maxWidth(){return parseInt(this.getAttribute("max-width")||9999,10)}connectedCallback(){this.initialMarkup=this.innerHTML,this.render(),new ResizeObserver((e=>{const{contentRect:t}=e[0];this.state.enabled=t.width<=this.maxWidth,this.root.style.setProperty("--panel-top",Math.ceil(this.parentNode.parentNode.offsetHeight)+"px")})).observe(this.parentNode)}render(){this.innerHTML=`\n      <div class="burger-menu" data-element="burger-root">\n        <button class="burger-menu__trigger" data-element="burger-menu-trigger" type="button" aria-label="Ouvrir le menu">\n          <span class="burger-menu__bar" aria-hidden="true"></span>\n        </button>\n        <div class="burger-menu__panel" data-element="burger-menu-panel">\n          ${this.initialMarkup}\n        </div>\n      </div>\n    `,this.postRender()}postRender(){if(this.trigger=this.querySelector('[data-element="burger-menu-trigger"]'),this.panel=this.querySelector('[data-element="burger-menu-panel"]'),this.root=this.querySelector('[data-element="burger-root"]'),this.focusableElements=this?this.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"]):not([disabled]), details:not([disabled]), summary:not(:disabled)'):(console.warn("You need to pass a parent HTMLElement"),[]),this.trigger&&this.panel)return this.toggle(),this.trigger.addEventListener("click",(e=>{e.preventDefault(),this.toggle()})),void document.addEventListener("focusin",(()=>{this.contains(document.activeElement)||this.toggle("closed")}));this.innerHTML=this.initialMarkup}toggle(e){if(e){if(this.state.status===e)return;this.state.status=e}else this.state.status="closed"===this.state.status?"open":"closed"}processStateChange(){switch(this.root.setAttribute("status",this.state.status),this.root.setAttribute("enabled",this.state.enabled?"true":"false"),this.manageFocus(),this.state.status){case"closed":this.trigger.setAttribute("aria-expanded","false"),this.trigger.setAttribute("aria-label","Open menu"),(c=this)?(r.set(c,(null==r?void 0:r.get(c))?(null==r?void 0:r.get(c))-1:0),0===(null==r?void 0:r.get(c))&&(i=i.filter((e=>e.targetElement!==c)),null==r||r.delete(c)),t&&(c.ontouchstart=null,c.ontouchmove=null,l&&0===i.length&&(document.removeEventListener("touchmove",u,e?{passive:!1}:void 0),l=!1)),0===i.length&&(t?(()=>{if(void 0!==o){const e=-parseInt(document.body.style.top,10),t=-parseInt(document.body.style.left,10),n=document.documentElement,i=document.body;n.style.height=(null==s?void 0:s.height)||"",n.style.overflow=(null==s?void 0:s.overflow)||"",i.style.position=o.position||"",i.style.top=o.top||"",i.style.left=o.left||"",i.style.width=o.width||"",i.style.height=o.height||"",i.style.overflow=o.overflow||"",window.scrollTo(t,e),o=void 0}})():void 0!==n&&(document.body.style.overflow=n,n=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");break;case"open":case"initial":this.trigger.setAttribute("aria-expanded","true"),this.trigger.setAttribute("aria-label","Close menu"),(c=>{if(!c)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(r.set(c,(null==r?void 0:r.get(c))?(null==r?void 0:r.get(c))+1:1),i.some((e=>e.targetElement===c)))return;const h={targetElement:c,options:{}};i=[...i,h],t?window.requestAnimationFrame((()=>{const e=document.documentElement,t=document.body;if(void 0===o){s={...e.style},o={...t.style};const{scrollY:n,scrollX:i,innerHeight:r}=window;e.style.height="100%",e.style.overflow="hidden",t.style.position="fixed",t.style.top=-n+"px",t.style.left=-i+"px",t.style.width="100%",t.style.height="auto",t.style.overflow="hidden",setTimeout((()=>window.requestAnimationFrame((()=>{const e=r-window.innerHeight;e&&n>=r&&(t.style.top=-(n+e)+"px")}))),300)}})):(window.innerWidth,document.documentElement.getBoundingClientRect().width,void 0===n&&(n=document.body.style.overflow,document.body.style.overflow="hidden")),t&&(c.ontouchstart=e=>{1===e.targetTouches.length&&(a=e.targetTouches[0].clientY)},c.ontouchmove=e=>{1===e.targetTouches.length&&((e,t)=>{const n=e.targetTouches[0].clientY-a;!d(e.target)&&(t&&0===t.scrollTop&&n>0||(e=>!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight)(t)&&n<0?u(e):e.stopPropagation())})(e,c)},l||(document.addEventListener("touchmove",u,e?{passive:!1}:void 0),l=!0))})(this)}var c}manageFocus(){if(this.state.enabled)switch(this.state.status){case"open":this.focusableElements.forEach((e=>e.removeAttribute("tabindex")));break;case"closed":[...this.focusableElements].filter((e=>"burger-menu-trigger"!==e.getAttribute("data-element"))).forEach((e=>e.setAttribute("tabindex","-1")))}else this.focusableElements.forEach((e=>e.removeAttribute("tabindex")))}}"customElements"in window&&customElements.define("burger-menu",c);const h=document.querySelector(".back-to-top");new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.target.classList.toggle("is-intersecting",e.isIntersecting)}))}),{}).observe(h);
